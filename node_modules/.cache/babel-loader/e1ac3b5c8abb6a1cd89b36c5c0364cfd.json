{"ast":null,"code":"const {\n  POST_INIT_RECIPES,\n  GET_ALL_RECIPES,\n  GET_RECIPE_DETAIL,\n  DELETE_DETAIL,\n  FILTER_BY_DIET,\n  DELETE_FILTER,\n  ORDER_BY_NAME,\n  SEARCH_BY_NAME,\n  POST_NEW_RECIPE,\n  GET_ALL_DIETS,\n  ORDER_BY_HEALTHSCORE\n} = require(\"../actions\");\n\nconst initialState = {\n  recipesOk: [],\n  recipes: [],\n  recipeDetail: {},\n  dietFiltered: [],\n  // se crea una variable para que el filtrado de dietas no se haga sobre la que trae la pagina\n  allRecipes: [],\n  recipesSearch: [],\n  allDiets: []\n};\n\nfunction rootReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case POST_INIT_RECIPES:\n      return { ...state,\n        recipesOk: action.payload\n      };\n\n    case GET_ALL_RECIPES:\n      return { ...state,\n        recipes: action.payload,\n        allRecipes: action.payload\n      };\n\n    case GET_RECIPE_DETAIL:\n      // console.log('ENTRA AL REDUCER', action.payload)  \n      return { ...state,\n        recipeDetail: action.payload\n      };\n\n    case DELETE_DETAIL:\n      console.log('ENTRA AL REDUCER');\n      return { ...state,\n        recipeDetail: {}\n      };\n\n    case FILTER_BY_DIET:\n      const allRecipes = state.allRecipes;\n      console.log('ACTION', action.payload);\n      console.log('ALLRECIP', allRecipes);\n      let dietFiltered = action.payload === 'All' ? allRecipes : allRecipes.filter(el => {\n        const asd = el.diets.filter(el => el.name === action.payload);\n\n        if (asd.length > 0) {\n          return true;\n        }\n\n        return false;\n      });\n      console.log('DIETASFILT', dietFiltered); // for (let clave in el.diets){\n      //     console.log(\"CLAVE\", clave)\n      //     console.log('USUARIO', el[clave])\n      // }\n      // console.log(\"DIETAS\",el.diets)\n      // el.diets.includes({\n      //     \"name\": \"gluten free\"})\n      // el.id === 636608\n      // console.log('PRUEBA', el.diets.includes('lacto ovo vegetarian'))\n      // })\n\n      return { ...state,\n        recipes: dietFiltered\n      };\n\n    case DELETE_FILTER:\n      // para resetear el filtro cuando actualiza\n      return { ...state,\n        dietFiltered: []\n      };\n\n    case ORDER_BY_NAME:\n      let arrayOrd = action.payload === 'asc' ? state.recipes.sort((a, b) => {\n        if (a.title > b.title) return 1;\n        if (b.title > a.title) return -1;\n        return 0;\n      }) : state.recipes.sort((a, b) => {\n        if (a.title > b.title) return -1;\n        if (b.title > a.title) return 1;\n        return 0;\n      }); // console.log('SOY EL ARRAY',arrayOrd)\n\n      return { ...state,\n        recipes: arrayOrd\n      };\n\n    case ORDER_BY_HEALTHSCORE:\n      let arrayLowHigh = action.payload === 'low' ? state.recipes.sort((a, b) => {\n        if (a.healthScore > b.healthScore) return 1;\n        if (b.healthScore > a.healthScore) return -1;\n        return 0;\n      }) : state.recipes.sort((a, b) => {\n        if (a.healthScore > b.healthScore) return -1;\n        if (b.healthScore > a.healthScore) return 1;\n        return 0;\n      });\n      return { ...state,\n        recipes: arrayLowHigh\n      };\n\n    case SEARCH_BY_NAME:\n      return { ...state,\n        recipesSearch: action.payload,\n        recipes: action.payload\n      };\n\n    case POST_NEW_RECIPE:\n      // console.log('SOY EL REDUCER', action.payload)\n      return { ...state\n      };\n\n    case GET_ALL_DIETS:\n      return { ...state,\n        allDiets: action.payload\n      };\n\n    default:\n      return state;\n  }\n}\n\nmodule.exports = {\n  rootReducer\n};","map":{"version":3,"names":["POST_INIT_RECIPES","GET_ALL_RECIPES","GET_RECIPE_DETAIL","DELETE_DETAIL","FILTER_BY_DIET","DELETE_FILTER","ORDER_BY_NAME","SEARCH_BY_NAME","POST_NEW_RECIPE","GET_ALL_DIETS","ORDER_BY_HEALTHSCORE","require","initialState","recipesOk","recipes","recipeDetail","dietFiltered","allRecipes","recipesSearch","allDiets","rootReducer","state","action","type","payload","console","log","filter","el","asd","diets","name","length","arrayOrd","sort","a","b","title","arrayLowHigh","healthScore","module","exports"],"sources":["C:/Users/Ale/Desktop/PI-Food-main/client/src/reducer/index.js"],"sourcesContent":["const { POST_INIT_RECIPES, GET_ALL_RECIPES, GET_RECIPE_DETAIL, DELETE_DETAIL, FILTER_BY_DIET, DELETE_FILTER, ORDER_BY_NAME, SEARCH_BY_NAME, POST_NEW_RECIPE, GET_ALL_DIETS, ORDER_BY_HEALTHSCORE } = require(\"../actions\");\r\n\r\n\r\nconst initialState = {\r\n    recipesOk : [],\r\n    recipes : [],\r\n    recipeDetail: {},\r\n    dietFiltered: [],\r\n    // se crea una variable para que el filtrado de dietas no se haga sobre la que trae la pagina\r\n    allRecipes: [],\r\n    recipesSearch:[],\r\n    allDiets:[],\r\n\r\n}\r\n\r\nfunction rootReducer (state = initialState, action){\r\n    switch(action.type){\r\n        case POST_INIT_RECIPES:\r\n            return {\r\n                ...state,\r\n                recipesOk: action.payload\r\n            };\r\n        case GET_ALL_RECIPES:\r\n            return{\r\n                ...state,\r\n                recipes: action.payload,\r\n                allRecipes: action.payload\r\n            };\r\n        case GET_RECIPE_DETAIL:\r\n            // console.log('ENTRA AL REDUCER', action.payload)  \r\n            return{\r\n                ...state,\r\n                recipeDetail: action.payload\r\n            }\r\n        case DELETE_DETAIL:\r\n            console.log('ENTRA AL REDUCER')\r\n            return{\r\n                ...state,\r\n                recipeDetail:{}\r\n            }\r\n        case FILTER_BY_DIET:\r\n            const allRecipes = state.allRecipes\r\n            console.log('ACTION',action.payload)\r\n            console.log('ALLRECIP', allRecipes)\r\n            let dietFiltered = action.payload === 'All'? allRecipes : allRecipes.filter(el=>{\r\n                const asd = el.diets.filter(el=>el.name===action.payload)\r\n                if(asd.length>0){\r\n                    return true\r\n                }\r\n                return false\r\n                })\r\n            console.log('DIETASFILT', dietFiltered)\r\n                \r\n                    // for (let clave in el.diets){\r\n                    //     console.log(\"CLAVE\", clave)\r\n                    //     console.log('USUARIO', el[clave])\r\n                    // }\r\n                \r\n                // console.log(\"DIETAS\",el.diets)\r\n                // el.diets.includes({\r\n                //     \"name\": \"gluten free\"})\r\n                // el.id === 636608\r\n                \r\n                // console.log('PRUEBA', el.diets.includes('lacto ovo vegetarian'))\r\n            // })\r\n            \r\n            return{\r\n                ...state,\r\n                recipes: dietFiltered\r\n            }\r\n        case DELETE_FILTER: // para resetear el filtro cuando actualiza\r\n            return{\r\n                ...state,\r\n                dietFiltered: []\r\n            }\r\n        case ORDER_BY_NAME:\r\n            let arrayOrd = action.payload === 'asc' ?\r\n                state.recipes.sort((a,b)=>{\r\n                    if (a.title>b.title) return 1\r\n                    if (b.title>a.title) return -1\r\n                    return 0\r\n                }):\r\n                state.recipes.sort((a,b)=>{\r\n                    if (a.title>b.title) return -1\r\n                    if (b.title>a.title) return 1\r\n                    return 0\r\n                })\r\n                // console.log('SOY EL ARRAY',arrayOrd)\r\n            return{\r\n                ...state,\r\n                recipes: arrayOrd\r\n            }\r\n        case ORDER_BY_HEALTHSCORE:\r\n            let arrayLowHigh = action.payload === 'low'?\r\n                state.recipes.sort((a,b)=>{\r\n                    if (a.healthScore>b.healthScore) return 1\r\n                    if (b.healthScore>a.healthScore) return -1 \r\n                    return 0       \r\n                }):\r\n                state.recipes.sort((a,b)=>{\r\n                    if (a.healthScore>b.healthScore) return -1\r\n                    if (b.healthScore>a.healthScore) return 1 \r\n                    return 0 \r\n                })\r\n            return{\r\n                ...state,\r\n                recipes: arrayLowHigh\r\n            }\r\n        case SEARCH_BY_NAME:\r\n            return{\r\n                ...state,\r\n                recipesSearch: action.payload,\r\n                recipes: action.payload\r\n            }\r\n        case POST_NEW_RECIPE:\r\n            // console.log('SOY EL REDUCER', action.payload)\r\n            return{\r\n                ...state\r\n            }\r\n        case GET_ALL_DIETS:\r\n            return{\r\n                ...state,\r\n                allDiets: action.payload\r\n            }\r\n        default:\r\n            return state;\r\n    }        \r\n}\r\n\r\n\r\n\r\nmodule.exports={\r\n    rootReducer\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}